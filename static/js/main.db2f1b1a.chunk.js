(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(20)},18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(6),i=n.n(l),o=(n(18),n(8)),c=n(3),u=n(4),s=n(11),f=n(7),v=n(10),d=n(1),h=n(2);n(19);var m=function(e){var t=e.value,n=e.onClick,r=t?"red":"blue",l=-1===t?"":t?"O":"X";return a.a.createElement("div",{className:"cell",onClick:n,style:{color:r}},l)},g=n(9),b=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];function E(){for(var e=[],t=0;t<9;t++)e.push(new Array(9).fill(-1));return{board:Object(h.b)(e),turn:0,current:-1}}function k(e){for(var t=b,n=0;n<t.length;n++){var r=t[n],a=Object(g.a)(r,3),l=a[0],i=a[1],o=a[2],c=e.get(l);if(-1!==c&&c===e.get(i)&&c===e.get(o))return c}return-1}function y(e){return k(e.map(k))}var w=function(e){var t=e.value,n=e.onClick,r=k(t);return a.a.createElement("table",{className:-1===r?"":"win-"+r},a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(m,{value:t.get(0),onClick:function(){return n(0)}})),a.a.createElement("td",null,a.a.createElement(m,{value:t.get(1),onClick:function(){return n(1)}})),a.a.createElement("td",null,a.a.createElement(m,{value:t.get(2),onClick:function(){return n(2)}}))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(m,{value:t.get(3),onClick:function(){return n(3)}})),a.a.createElement("td",null,a.a.createElement(m,{value:t.get(4),onClick:function(){return n(4)}})),a.a.createElement("td",null,a.a.createElement(m,{value:t.get(5),onClick:function(){return n(5)}}))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(m,{value:t.get(6),onClick:function(){return n(6)}})),a.a.createElement("td",null,a.a.createElement(m,{value:t.get(7),onClick:function(){return n(7)}})),a.a.createElement("td",null,a.a.createElement(m,{value:t.get(8),onClick:function(){return n(8)}})))))};var p=function(e){var t=e.board,n=e.onClick;return a.a.createElement("table",{style:{background:"black",borderRadius:6}},a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(w,{value:t.get(0),onClick:function(e){return n(0,e)}})),a.a.createElement("td",null,a.a.createElement(w,{value:t.get(1),onClick:function(e){return n(1,e)}})),a.a.createElement("td",null,a.a.createElement(w,{value:t.get(2),onClick:function(e){return n(2,e)}}))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(w,{value:t.get(3),onClick:function(e){return n(3,e)}})),a.a.createElement("td",null,a.a.createElement(w,{value:t.get(4),onClick:function(e){return n(4,e)}})),a.a.createElement("td",null,a.a.createElement(w,{value:t.get(5),onClick:function(e){return n(5,e)}}))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(w,{value:t.get(6),onClick:function(e){return n(6,e)}})),a.a.createElement("td",null,a.a.createElement(w,{value:t.get(7),onClick:function(e){return n(7,e)}})),a.a.createElement("td",null,a.a.createElement(w,{value:t.get(8),onClick:function(e){return n(8,e)}})))))};function C(e){return Object(h.c)(e.board)+"|"+e.turn+"|"+e.current}function O(e){var t=e.board.map(k),n=e.current;-1!==t.get(n)&&(n=-1);for(var r=[],a=0;a<9;a++)if(-1===n||n===a)for(var l=0;l<9;l++)-1===t.get(a)&&-1===e.board.getIn([a,l])&&r.push([a,l]);return r}function j(e,t){return{board:e.board.setIn(t,e.turn),turn:1-e.turn,current:t[1]}}function M(e){for(;;){var t=y(e.board);if(-1!==t)return t;var n=O(e);if(!n.length)return-1;e=j(e,n[Math.floor(Math.random()*n.length)])}}var S=function(){function e(t){Object(c.a)(this,e),this.N=0,this.sims=new Map,this.wins=new Map,this.iterations=t}return Object(u.a)(e,[{key:"_uctPolicy",value:function(e){var t=O(e),n=-1/0,r=null,a=!0,l=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=j(e,o.value),s=C(u),f=this.sims.get(s);if(!f)return null;var v=this.wins.get(s)/f+10*Math.sqrt(Math.log(this.N)/f);v>n&&(r=u,n=v)}}catch(d){l=!0,i=d}finally{try{a||null==c.return||c.return()}finally{if(l)throw i}}return r}},{key:"_pickUnvisited",value:function(e){var t=[],n=O(e),r=!0,a=!1,l=void 0;try{for(var i,o=n[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var c=j(e,i.value);this.sims.get(C(c))||t.push(c)}}catch(u){a=!0,l=u}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}return t.length?t[Math.floor(Math.random()*t.length)]:e}},{key:"nextMove",value:function(e){for(var t=0;t<this.iterations;t++){++this.N;for(var n=[e],r=e;;){var a=this._uctPolicy(r);if(!a)break;r=a,n.push(r)}r=this._pickUnvisited(r),n.push(r);for(var l=M(r),i=n,o=0;o<i.length;o++){var c=i[o],u=C(c);this.sims.set(u,(this.sims.get(u)||0)+1),this.wins.set(u,(this.wins.get(u)||0)+(-1===l?.5:l===c.turn?0:1))}}var s=O(e),f=null,v=-1,d=!0,h=!1,m=void 0;try{for(var g,b=s[Symbol.iterator]();!(d=(g=b.next()).done);d=!0){var E=g.value,k=this.sims.get(C(j(e,E)));k>v&&(f=E,v=k)}}catch(y){h=!0,m=y}finally{try{d||null==b.return||b.return()}finally{if(h)throw m}}return f}}]),e}(),N=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(f.a)(t).call(this,e))).state={history:new h.a([E()])},n.restart=n.restart.bind(Object(d.a)(Object(d.a)(n))),n.handleClick=n.handleClick.bind(Object(d.a)(Object(d.a)(n))),n.aiMove=n.aiMove.bind(Object(d.a)(Object(d.a)(n))),n.undo=n.undo.bind(Object(d.a)(Object(d.a)(n))),n.ai=new S(1e3),n}return Object(v.a)(t,e),Object(u.a)(t,[{key:"restart",value:function(){this.setState({history:new h.a([E()])}),this.ai=new S(1e3)}},{key:"undo",value:function(){this.state.history.size>1&&this.setState({history:this.state.history.slice(0,-1)})}},{key:"handleClick",value:function(e,t){var n=this.gameState;if(-1===y(n.board)&&-1===n.board.getIn([e,t])){if(-1!==n.current){var r=n.board.get(n.current),a=k(r),l=-1!==r.indexOf(-1);if(-1===a&&l&&e!==n.current)return;if(-1!==a&&e===n.current)return}var i=n.board.setIn([e,t],n.turn);this.gameState={board:i,turn:1-n.turn,current:t};var o=y(i);-1!==o&&setTimeout(function(){alert("".concat(o?"O":"X"," has won!"))},1e3)}}},{key:"aiMove",value:function(){var e=this.ai.nextMove(this.gameState);e&&this.handleClick.apply(this,Object(o.a)(e))}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"Super Tic-Tac-Toe"),a.a.createElement("div",{className:"grid"},a.a.createElement(p,{board:this.gameState.board,onClick:this.handleClick})),a.a.createElement("div",{className:"controls"},a.a.createElement("button",{onClick:this.restart},"Restart")," ",a.a.createElement("button",{onClick:this.aiMove},"AI Move")," ",a.a.createElement("button",{onClick:this.undo},"Undo")))}},{key:"gameState",get:function(){return this.state.history.last()},set:function(e){this.setState({history:this.state.history.push(e)})}}]),t}(r.Component),x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(a.a.createElement(N,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");x?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):A(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):A(t,e)})}}()}},[[12,1,2]]]);
//# sourceMappingURL=main.db2f1b1a.chunk.js.map